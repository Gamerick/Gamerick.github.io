<!DOCTYPE html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        img.icon {
            width: 48px;
            height: 48px;
        }
    </style>
</head>

<body>
    <script>
        const wikiPage = "https://stardewvalleywiki.com/"

        function buildIngredientsTable(ingredients) {
            const cropList = document.getElementById("crops-table-body")
            const sorted = ingredients.sort((a, b) => a.name.localeCompare(b.name))
            sorted.forEach(ingredient => {

                // Create the checkbox for tracking
                const input = document.createElement("input")
                input.type = "checkbox"
                input.classList.add("form-check-input")
                input.addEventListener("change", function (e) {
                    this.parentElement.parentElement.classList.remove("table-success")
                    if (this.checked) this.parentElement.parentElement.classList.add("table-success")
                })


                const tableRow = document.createElement("tr")
                tableRow.innerHTML += `<td><a href="${wikiPage + ingredient.name}">${ingredient.name}</a></td>`
                
                const td = document.createElement("td")
                td.appendChild(input)
                tableRow.appendChild(td)
                
                cropList.appendChild(tableRow)
            });
        }

        function buildRecipesTable(Recipes) {
            // TODO
        }

        window.onload = () => {
            const ingredients = fetch("ingredients.json")
                .then(res => res.json())
                .then(ingredients => buildIngredientsTable(ingredients))
        }
    </script>
    <div class="container">
        <h1>Stardew Cookables</h1>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md">
                <h3>Ingredients</h3>
                <table class="table">
                    <thead class="table-dark" style="position: sticky; top: 0">
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Owned?</th>
                        </tr>
                    </thead>
                    <tbody id="crops-table-body">
        
                    </tbody>
                </table>
            </div>
            <div class="col-md">
                <h3>Recipes</h3>
                <table class="table">
                    <thead class="table-dark" style="position: sticky; top: 0">
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Ingredients</th>
                            <th scope="col">Status</th>
                        </tr>
                    </thead>
                    <tbody id="recipes-table-body">
        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>

</html>
